### Info
### Description: Rest Client in Visual Studio Code

### Variables
@baseUrl = http://localhost:8000
@apiVersion = v1
@uFirstName = "John"
@uLastName = "Doe"
@uEmail = "john.doe.1234567890@example.com"
@uEmail2 = "john.for.doe.1234567890@example.com"
@uPassword = "passw@rdJ0hnD0e"
# @accessToken=jwt....

### Login
#### create new auth
# @name createUserAuth
POST {{baseUrl}}/api/{{apiVersion}}/register HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "firstname": {{uFirstName}},
    "lastname": {{uLastName}},
    "email": {{uEmail}},
    "password": {{uPassword}},
    "sector_id": 1,
    "contact_feedback": 1,
    "contact_news": 1
}

### Variables jwt token
# @accessToken = {{createUserAuth.response.body.$.access_token}}
@accessToken = {{loginUsernamePassword.response.body.$.access_token}}

### Access Token
# @name loginUsernamePassword
POST {{baseUrl}}/api/{{apiVersion}}/auth HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "email": {{uEmail}},
    "password": {{uPassword}}
}

# ### Variables jwt token
# @accessToken = {{loginUsernamePassword.response.body.$.access_token}}

### Logout
POST {{baseUrl}}/api/{{apiVersion}}/logout HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}


### USERS
#### create new user
POST {{baseUrl}}/api/{{apiVersion}}/users HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "firstname": {{uFirstName}},
    "lastname": {{uLastName}},
    "email": {{uEmail2}},
    "password": {{uPassword}}
}

### PERMISSIONS
#### get all permissions
GET {{baseUrl}}/api/{{apiVersion}}/permissions HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get permission by id
GET {{baseUrl}}/api/{{apiVersion}}/permissions/1 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create new permission
POST {{baseUrl}}/api/{{apiVersion}}/permissions HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name" : "test"
}

#### update permission by id
PATCH {{baseUrl}}/api/{{apiVersion}}/permissions/6 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name" : "test2"
}

#### delete permission by id
DELETE {{baseUrl}}/api/{{apiVersion}}/permissions/6 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

### USERS
#### get all users
GET {{baseUrl}}/api/{{apiVersion}}/users HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get user by id
GET {{baseUrl}}/api/{{apiVersion}}/users/3 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create new user
POST {{baseUrl}}/api/{{apiVersion}}/users HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "firstname": "john2",
    "lastname": "doe2",
    "email": "john.doe.test.123456789@test.com",
    "password": "Passw@rd1!"
}

#### update user
PATCH {{baseUrl}}/api/{{apiVersion}}/users/1 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "firstname": "john23",
    "lastname": "doe2",
    "email": "john.doe2.test.123456789@test.com",
    "password": "Passw@rd1!"
}

#### delete user by id
DELETE {{baseUrl}}/api/{{apiVersion}}/users/12 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

### TEAMS
#### get all teams
GET {{baseUrl}}/api/{{apiVersion}}/teams HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get one team by id
GET {{baseUrl}}/api/{{apiVersion}}/teams/1 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create a new team
POST {{baseUrl}}/api/{{apiVersion}}/teams HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "Test Team Ltd", 
    "enabled": 1,
    "allows_messaging": 1,
    "workflow_enabled": 1,
    "access_requests_management": 1,
    "uses_5_safes": 1,
    "is_admin": 1,
    "member_of": 1001,
    "contact_point": "dinos345@mail.com",
    "application_form_updated_by": "Someone Somewhere",
    "application_form_updated_on": "2023-04-06 15:44:41",
    "notifications": []
}

### Review
#### get all reviews
GET {{baseUrl}}/api/{{apiVersion}}/reviews HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get review by id
GET {{baseUrl}}/api/{{apiVersion}}/reviews/1 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### add new review
POST {{baseUrl}}/api/{{apiVersion}}/reviews HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "tool_id": 1,
    "user_id" : 1,
    "rating" : 4,
    "review_text": "Similique provident natus facere eveniet facere. Cumque corporis et cumque consequatur.",
    "review_state": "active"
}

#### update review
PUT {{baseUrl}}/api/{{apiVersion}}/reviews/11 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "tool_id": 1,
    "user_id" : 1,
    "rating" : 5,
    "review_text": "Similique provident natus facere eveniet facere. Cumque corporis et cumque consequatur.",
    "review_state": "active"
}

#### update review
DELETE {{baseUrl}}/api/{{apiVersion}}/reviews/11 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

### Collections 
#### get all collections
GET {{baseUrl}}/api/{{apiVersion}}/collections HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get collection by id
GET {{baseUrl}}/api/{{apiVersion}}/collections/1 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### add new collection
POST {{baseUrl}}/api/{{apiVersion}}/collections HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "covid",
    "description" : "Dolorem voluptas consequatur nihil illum et sunt libero.",
    "image_link" : "https://via.placeholder.com/640x480.png/0022bb?text=animals+cumque",
    "enabled": true,
    "keywords": "key words",
    "public": true,
    "counter": 123
}

#### update collection
PUT {{baseUrl}}/api/{{apiVersion}}/collections/12 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "covid 2",
    "description" : "Dolorem voluptas consequatur nihil illum et sunt libero.",
    "image_link" : "https://via.placeholder.com/640x480.png/0022bb?text=animals+cumque",
    "enabled": true,
    "keywords": "key words",
    "public": true,
    "counter": 123
}

#### delete collection
DELETE {{baseUrl}}/api/{{apiVersion}}/collections/11 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}


### TAGS
#### get all tags
GET {{baseUrl}}/api/{{apiVersion}}/tags HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get one tag by id
GET {{baseUrl}}/api/{{apiVersion}}/tags/1 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create a new tag
POST {{baseUrl}}/api/{{apiVersion}}/tags HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "type": "Type Test",
    "enabled": 1,
    "description": "type for test"
}

#### update tag
PUT {{baseUrl}}/api/{{apiVersion}}/tags/1 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "type": "Something",
    "enabled": 1,
    "description": "Something"
}

#### delete tag by id
DELETE {{baseUrl}}/api/{{apiVersion}}/tags/2 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}


### APPLICATIONS
#### get all applications
GET {{baseUrl}}/api/{{apiVersion}}/applications HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get one application by id
GET {{baseUrl}}/api/{{apiVersion}}/applications/51 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create application
POST {{baseUrl}}/api/{{apiVersion}}/applications HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "Hello World",
    "image_link": "https://via.placeholder.com/640x480.png/0022dd?text=animals+aliquam",
    "description": "Praesentium ut et quae suscipit ut quo adipisci. Enim ut tenetur ad omnis ut consequatur. Aliquid officiis expedita rerum.",
    "team_id": 5,
    "user_id": 2,
    "enabled": true,
    "notifications": [
        "t1@test.com",
        "t2@test.com",
        "t3@test.com"
    ]
}

#### update application
PUT {{baseUrl}}/api/{{apiVersion}}/applications/51 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "Hello World Update sdsd",
    "image_link": "https://via.placeholder.com/640x480.png/0022dd?text=animals+aliquam+Update",
    "description": "Praesentium ut et quae suscipit ut quo adipisci. Update.",
    "team_id": 1,
    "user_id": 3,
    "enabled": true,
    "tags": [1,2],
    "permissions": [3,2],
    "notifications": [
        "t1@test.com",
        "t2@test.com",
        "t3@test.com"
    ]
}

#### edit application
PATCH {{baseUrl}}/api/{{apiVersion}}/applications/51 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "Hello World PATCH",
    "app_id": "obmWCcsccdxH5iHgLTJDZNXNkyW1ZxZ4PATCH",
    "client_id": "iem4i3geb1FxehvvQBlSOZ2A6SPATCH",
    "image_link": "https://via.placeholder.com/640x480.png/0022dd?text=animals+aliquam+PATCH",
    "description": "Praesentium ut et quae suscipit ut quo adipisci. PATCH."
}

#### delete application by id
DELETE {{baseUrl}}/api/{{apiVersion}}/applications/51 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}


### DATASETS
#### get all datasets
##### http://localhost:8000/api/v1/datasets?team_id=52&fields=id,label,short_description,created,dataset&sort=short_description&direction=asc&decode_metadata=true
GET {{baseUrl}}/api/{{apiVersion}}/datasets HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get all datasets/ withTrashed
GET {{baseUrl}}/api/{{apiVersion}}/datasets?withTrashed=true HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get all datasets/ pagination
GET {{baseUrl}}/api/{{apiVersion}}/datasets?page=2 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get all datasets/ withTrashed & pagination
GET {{baseUrl}}/api/{{apiVersion}}/datasets?withTrashed=true&page=2 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get one dataset by id
GET {{baseUrl}}/api/{{apiVersion}}/datasets/1 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create dataset
POST {{baseUrl}}/api/{{apiVersion}}/datasets HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "team_id": 1,
    "user_id": 3,
    "create_origin": "MANUAL",
    "label": "label dataset for test 1",
    "short_description": "lorem ipsum assaasdas as 1",
    "dataset": {
        "metadata": {
            "required": {
                "gatewayId": "1234",
                "gatewayPid": "5124f2",
                "issued": "2020-08-05T14:35:59Z",
                "modified": "2021-01-28T14:15:46Z",
                "revisions": [
                    {
                        "version": "1.0.0",
                        "url": "https://d5faf9c6-6c34-46d7-93c4-7706a5436ed9"
                    },
                    {
                        "version": "2.0.0",
                        "url": "https://a7ddefbd-31d9-4703-a738-256e4689f76a"
                    },
                    {
                        "version": "0.0.1",
                        "url": "https://9e798632-442a-427b-8d0e-456f754d28dc"
                    },
                    {
                        "version": "2.1.1",
                        "url": "https://a7ddefbd-31d9-4703-a738-256e4689f76a"
                    }
                ]
            },
            "summary": {
                "abstract": "xPublications that mention HDR-UK (or any variant thereof) in Acknowledgements or Author Affiliations",
                "contactPoint": "susheel.varma@hdruk.ac.uk",
                "keywords": "Preprints,Papers,HDR UK",
                "controlledKeywords": "",
                "datasetType": "list of papers",
                "description": "Publications that mention HDR-UK (or any variant thereof) in Acknowledgements or Author Affiliations\n\nThis will include:\n- Papers\n- COVID-19 Papers\n- COVID-19 Preprint",
                "doiName": "10.1093/ije/dyx196",
                "shortTitle": "HDR UK Papers & Preprints",
                "title": "Publications that mention HDR-UK (or any variant thereof) in Acknowledgements or Author Affiliations",
                "publisher": {
                    "publisherName": "HEALTH DATA RESEARCH UK"
                }
            },
            "coverage": {
                "pathway": "NOT APPLICABLE",
                "physicalSampleAvailability": "NOT AVAILABLE",
                "spatial": "https://www.geonames.org/countries/GB/united-kingdom.html",
                "followup": "UNKNOWN",
                "typicalAgeRange": "0-0"
            },
            "provenance": {
                "origin": {
                    "purpose": "OTHER",
                    "source": "MACHINE GENERATED",
                    "collectionSituation": "OTHER"
                },
                "temporal": {
                    "endDate": "2022-04-30",
                    "startDate": "2020-03-31",
                    "timeLag": "NOT APPLICABLE",
                    "accrualPeriodicity": "DAILY",
                    "distributionReleaseDate": "2020-11-27"
                }
            },
            "accessibility": {
                "access": {
                    "deliveryLeadTime": "OTHER",
                    "jurisdiction": "GB-ENG",
                    "dataController": "HDR UK",
                    "dataProcessor": "HDR UK",
                    "accessRights": "https://raw.githubusercontent.com/HDRUK/papers/master/LICENSE",
                    "accessService": "https://github.com/HDRUK/papers",
                    "accessRequestCost": "Free"
                },
                "usage": {
                    "dataUseLimitation": "GENERAL RESEARCH USE",
                    "dataUseRequirement": "RETURN TO DATABASE OR RESOURCE",
                    "resourceCreator": "HDR UK Science Team"
                },
                "formatAndStandards": {
                    "vocabularyEncodingSchemes": "OTHER",
                    "conformsTo": "OTHER",
                    "languages": "en",
                    "formats": "CSV,JSON"
                }
            },
            "linkage": {
                "isGeneratedUsing": "something",
                "dataUses": "dunno",
                "isReferenceIn": "10.5281/zenodo.326615",
                "tools": "https://github.com/HDRUK/papers",
                "datasetLinkage": {
                    "isDerivedFrom": "https://web.www.healthdatagateway.org/dataset/fd8d0743-344a-4758-bb97-f8ad84a37357",
                    "isPartOf": "NOT APPLICABLE",
                    "isMemberOf": "blah",
                    "linkedDatasets": "https://web.www.healthdatagateway.org/dataset/fd8d0743-344a-4758-bb97-f8ad84a37357"
                },
                "investigations": "https://github.com/HDRUK/papers"
            },
            "observations": [
                {
                    "observedNode": "FINDINGS",
                    "measuredValue": 575,
                    "observationDate": "2020-11-27",
                    "measuredProperty": "Count",
                    "disambiguatingDescription": "Number of papers with affiliation and/or acknowledgement to HDR UK"
                }
            ],
            "structuralMetadata": [
                {
                    "name": "table1",
                    "description": "this is table 1",
                    "columns": [
                        {
                            "name": "column1",
                            "description": "this is column1",
                            "dataType": "String",
                            "sensitive": false
                        }
                    ]
                }
            ]
        }
    }
}




#### create dataset from schema.org
POST {{baseUrl}}/api/{{apiVersion}}/datasets HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "team_id": 53,
    "user_id": 3,
    "create_origin": "MANUAL",
    "label": "label dataset schema.org test 13",
    "short_description": "lorem ipsum assaasdas as 12",
    "dataset": {
        "metadata": {
            "@context": "https://schema.org/",
            "@id": "https://hdruk.ac.uk",
            "@type": "Dataset",
            "identifier": "10.1093/ije/dyx196",
            "version": "GDMv1",
            "url": "https://hdruk.ac.uk/1234",
            "name": "Publications that mention HDR-UK (or any variant thereof) in Acknowledgements or Author Affiliations",
            "alternateName": "HDR UK Papers & Preprints",
            "description": "Publications that mention HDR-UK (or any variant thereof) in Acknowledgements or Author Affiliations\n\nThis will include:\n- Papers\n- COVID-19 Papers\n- COVID-19 Preprint",
            "abstract": "Publications that mention HDR-UK (or any variant thereof) in Acknowledgements or Author Affiliations",
            "citation": "10.1093/ije/dyx196",
            "funder": {
                "@type": "Organization",
                "legalName": "HDR UK Science Team",
                "name": "HDR UK Science Team",
                "identifier": "",
                "sameAs": null,
                "email": null
            },
            "usageInfo": {
                "@type": "CreativeWork",
                "name": "usage",
                "accessibilitySummary": "GENERAL RESEARCH USE",
                "abstract": "",
                "accessMode": "",
                "identifier": "",
                "creator": null,
                "publisher": null
            },
            "creator": {
                "@type": "Organization",
                "legalName": "HDR UK Science Team",
                "name": "HDR UK Science Team",
                "email": "susheel.varma@hdruk.ac.uk",
                "identifier": "",
                "sameAs": null
            },
            "maintainer": {
                "@type": "Organization",
                "legalName": "HDR UK",
                "name": "HDR UK",
                "email": "susheel.varma@hdruk.ac.uk",
                "identifier": "",
                "sameAs": null
            },
            "publisher": {
                "@type": "Organization",
                "legalName": "HEALTH DATA RESEARCH UK",
                "name": "HEALTH DATA RESEARCH UK",
                "identifier": "",
                "sameAs": null,
                "email": null
            },
            "spatialCoverage": "MACHINE GENERATED",
            "temporalCoverage": "2020-03-31/2022-04-30",
            "isAccessibleForFree": true,
            "dateCreated": "2020-08-05T14:35:59Z",
            "distribution": {
                "@type": "DataDownload",
                "name": "https://github.com/HDRUK/papers",
                "contentUrl": "https://somehwere.com",
                "encodingFormat": "Unknown"
            },
            "keywords": "Preprints,Papers,HDR UK",
            "license": "https://raw.githubusercontent.com/HDRUK/papers/master/LICENSE",
            "accessMode": "",
            "accessibilitySummary": "",
            "includedInDataCatalog": null,
            "isBasedOn": null,
            "isPartOf": null,
            "hasPart": null,
            "measurementTechnique": "",
            "sameAs": null,
            "variableMeasured": "",
            "dateModified": null,
            "datePublished": null
        }
    }
}


#### create dataset from the HDRUK schema
POST {{baseUrl}}/api/{{apiVersion}}/datasets HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "team_id": 53,
    "user_id": 3,
    "create_origin": "MANUAL",
    "label": "label dataset HDRUK 2.1.2 test 4",
    "short_description": "lorem ipsum assaasdas as 12",
    "dataset": {
        "extra": {
            "id": "1234", 
            "pid": "5124f2",
            "controlledKeyWords": [
                "Papers",
                "COVID-19",
                "controlledWord"
            ],
            "pathwayDescription": "Not APPLICABLE for blah reason",
            "datasetType": "list of papers",
            "isGeneratedUsing": "something",
            "dataUses": "dunno",
            "isMemberOf": "blah"
        },
        "metadata": {
            "identifier": "https://web.www.healthdatagateway.org/dataset/a7ddefbd-31d9-4703-a738-256e4689f76a",
            "version": "2.0.0",
            "summary": {
                "title": "HDR UK Papers & Preprints",
                "doiName": "10.1093/ije/dyx196",
                "abstract": "Publications that mention HDR-UK (or any variant thereof) in Acknowledgements or Author Affiliations",
                "publisher": {
                    "name": "HEALTH DATA RESEARCH UK",
                    "memberOf": "OTHER",
                    "contactPoint": "susheel.varma@hdruk.ac.uk"
                },
                "contactPoint": "susheel.varma@hdruk.ac.uk",
                "keywords": [
                    "Preprints",
                    "Papers",
                    "HDR UK"
                ]
            },
            "documentation": {
                "description": "Publications that mention HDR-UK (or any variant thereof) in Acknowledgements or Author Affiliations\n\nThis will include:\n- Papers\n- COVID-19 Papers\n- COVID-19 Preprint",
                "associatedMedia": [
                    "https://github.com/HDRUK/papers"
                ],
                "isPartOf": "NOT APPLICABLE"
            },
            "revisions": [
                {
                    "version": "1.0.0",
                    "url": "https://d5faf9c6-6c34-46d7-93c4-7706a5436ed9"
                },
                {
                    "version": "2.0.0",
                    "url": "https://a7ddefbd-31d9-4703-a738-256e4689f76a"
                },
                {
                    "version": "0.0.1",
                    "url": "https://9e798632-442a-427b-8d0e-456f754d28dc"
                },
                {
                    "version": "2.1.1",
                    "url": "https://a7ddefbd-31d9-4703-a738-256e4689f76a"
                }
            ],
            "modified": "2021-01-28T14:15:46Z",
            "issued": "2020-08-05T14:35:59Z",
            "accessibility": {
                "formatAndStandards": {
                    "language": "en",
                    "vocabularyEncodingScheme": "OTHER",
                    "format": [
                        "CSV",
                        "JSON"
                    ],
                    "conformsTo": "OTHER"
                },
                "usage": {
                    "dataUseLimitation": "GENERAL RESEARCH USE",
                    "resourceCreator": "HDR UK Science Team",
                    "dataUseRequirements": "RETURN TO DATABASE OR RESOURCE",
                    "isReferencedBy": [
                        "10.5281/zenodo.326615"
                    ],
                    "investigations": [
                        "https://github.com/HDRUK/papers"
                    ]
                },
                "access": {
                    "dataController": "HDR UK",
                    "jurisdiction": "GB-ENG",
                    "dataProcessor": "HDR UK",
                    "accessService": "https://github.com/HDRUK/papers",
                    "accessRights": "https://raw.githubusercontent.com/HDRUK/papers/master/LICENSE",
                    "accessRequestCost": "Free",
                    "deliveryLeadTime": "OTHER"
                }
            },
            "observations": [
                {
                    "observedNode": "FINDINGS",
                    "measuredValue": 575,
                    "disambiguatingDescription": "Number of papers with affiliation and/or acknowledgement to HDR UK",
                    "observationDate": "2020-11-27",
                    "measuredProperty": "Count"
                }
            ],
            "provenance": {
                "temporal": {
                    "endDate": "2022-04-30",
                    "timeLag": "NOT APPLICABLE",
                    "distributionReleaseDate": "2020-11-27",
                    "accrualPeriodicity": "DAILY",
                    "startDate": "2020-03-31"
                },
                "origin": {
                    "purpose": "OTHER",
                    "source": "MACHINE GENERATED",
                    "collectionSituation": [
                        "OTHER"
                    ]
                }
            },
            "coverage": {
                "followup": "UNKNOWN",
                "spatial": "https://www.geonames.org/countries/GB/united-kingdom.html",
                "physicalSampleAvailability": [
                    "NOT AVAILABLE"
                ],
                "pathway": "NOT APPLICABLE",
                "typicalAgeRange": "0-0"
            },
            "enrichmentAndLinkage": {
                "tools": [
                    "https://github.com/HDRUK/papers"
                ],
                "qualifiedRelation": [
                    "https://web.www.healthdatagateway.org/dataset/fd8d0743-344a-4758-bb97-f8ad84a37357"
                ],
                "derivation": [
                    "https://web.www.healthdatagateway.org/dataset/fd8d0743-344a-4758-bb97-f8ad84a37357"
                ]
            },
            "structuralMetadata": [
                {
                    "name": "table1",
                    "description": "this is table 1",
                    "elements": [
                        {
                            "name": "column1",
                            "description": "this is column1",
                            "dataType": "String",
                            "sensitive": false
                        }
                    ]
                }
            ]
        }
    }
}





#### delete dateset by id
DELETE {{baseUrl}}/api/{{apiVersion}}/datasets/13 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}


### ROLES
#### get all roles
GET {{baseUrl}}/api/{{apiVersion}}/roles HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get one role by id
GET {{baseUrl}}/api/{{apiVersion}}/roles/2 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create role
POST {{baseUrl}}/api/{{apiVersion}}/roles HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "this.is.a.new.role.4",
    "enabled": true,
    "permissions" : [
        "create",
        "read",
        "test",
        "test2"
    ]
}

#### update role
PUT {{baseUrl}}/api/{{apiVersion}}/roles/13 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "this.is.a.new.role",
    "enabled": true,
    "permissions" : [
        "create",
        "read",
        "test",
        "test2"
    ]
}

#### edit role
PATCH {{baseUrl}}/api/{{apiVersion}}/roles/13 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "name": "this.is.a.new.role.y",
    "permissions" : [
        "enquiries.update"
    ]
}

#### delete role by id
DELETE {{baseUrl}}/api/{{apiVersion}}/roles/15 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

### TEAMS - USERS - ROLES
#### add new user in team
POST {{baseUrl}}/api/{{apiVersion}}/teams/1/users HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "userId": 12,
    "roles" : [
        "custodian.team.admin",
        "custodian.metadata.manager"
    ]
}

#### update team - user - role
PUT {{baseUrl}}/api/{{apiVersion}}/teams/1/users/12 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "roles" : {
        "custodian.metadata.manager": false,
        "metadata.editor": true,
        "dar.reviewer": true
    }
}

#### delete team - user - role
DELETE {{baseUrl}}/api/{{apiVersion}}/teams/1/users/12 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}


### Email Templates
#### get all email templates
GET {{baseUrl}}/api/{{apiVersion}}/emailtemplates HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get one email template by id
GET {{baseUrl}}/api/{{apiVersion}}/emailtemplates/2 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create email template
POST {{baseUrl}}/api/{{apiVersion}}/emailtemplates HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "identifier": "identifier email template",
    "subject": "subject email template",
    "body": "<mjml>...</mjml>",
    "enabled": true
}

#### update email template
PUT {{baseUrl}}/api/{{apiVersion}}/emailtemplates/17 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "identifier": "identifier email template test",
    "subject": "subject email template test",
    "body": "<mjml>...</mjml>",
    "enabled": true
}

#### edit email template
PATCH {{baseUrl}}/api/{{apiVersion}}/emailtemplates/17 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "identifier": "identifier email template edit2",
    "subject": "subject email template edit",
    "body": "<mjml>...</mjml>"
}

#### delete email template
DELETE {{baseUrl}}/api/{{apiVersion}}/emailtemplates/16 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}


### Team Notifications
#### get team notifications by teamId and jwt token
GET {{baseUrl}}/api/{{apiVersion}}/teams/1/notifications HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create notifications for team
POST {{baseUrl}}/api/{{apiVersion}}/teams/1/notifications HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "user_notification_status": true,
    "team_notification_status": true,
    "team_emails": [
        "djakubowski@example.org",
        "trohan.bla@example.net",
        "willis.rice.bla@example.net",
        "amir.swift.bla@example.org"
    ]
}

### Federation Team Notifications
#### get all federations for team
GET {{baseUrl}}/api/{{apiVersion}}/teams/13/federations HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get one federations for team
GET {{baseUrl}}/api/{{apiVersion}}/teams/13/federations/51 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create federation for team
POST {{baseUrl}}/api/{{apiVersion}}/teams/13/federations HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "federation_type": "dataset",
    "auth_type": "BEARER",
    "auth_secret_key": "path for secret key",
    "endpoint_baseurl": "https://fma-custodian-test-server-pljgro4dzq-nw.a.run.app",
    "endpoint_datasets": "/api/v1/noauth/datasets",
    "endpoint_dataset": "/api/v1/noauth/datasets/{id}",
    "run_time_hour": 11,
    "enabled": true,
    "notifications": [
        "t1@test.com",
        "t2@test.com",
        "t3@test.com"
    ],
    "tested": true
}

#### update federation for team
PUT {{baseUrl}}/api/{{apiVersion}}/teams/13/federations/51 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "federation_type": "dataset",
    "auth_type": "bearer",
    "auth_secret_key": "path for secret key2",
    "endpoint_baseurl": "https://fma-custodian-test-server-pljgro4dzq-nw.a.run.app",
    "endpoint_datasets": "/api/v1/noauth/datasets",
    "endpoint_dataset": "/api/v1/noauth/datasets/{id}",
    "run_time_hour": 11,
    "enabled": true,
    "notifications": [
        "t1@test.com",
        "y2@test.com",
        "y3@test.com"
    ]
}

#### edit federation for team
PATCH {{baseUrl}}/api/{{apiVersion}}/teams/13/federations/51 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "federation_type": "dataset",
    "auth_type": "bearer",
    "auth_secret_key": "path for secret key4",
    "endpoint_baseurl": "https://fma-custodian-test-server-pljgro4dzq-nw.a.run.app/test2",
    "endpoint_datasets": "/api/v1/noauth/datasets",
    "endpoint_dataset": "/api/v1/noauth/datasets/{id}",
    "run_time_hour": 11,
    "enabled": true,
    "notifications": [
        "t1@test.com"
    ]
}

#### delete federation for team by federation_id and team_id
DELETE {{baseUrl}}/api/{{apiVersion}}/teams/13/federations/51 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}


### Audit Logs
#### get all audit logs
GET {{baseUrl}}/api/{{apiVersion}}/audit_logs HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get one audit log by id
GET {{baseUrl}}/api/{{apiVersion}}/audit_logs/2 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create audit_log
POST {{baseUrl}}/api/{{apiVersion}}/audit_logs HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "user_id": 1,
    "team_id": 2,
    "action_type": "CREATE",
    "action_service": "Gateway API",
    "description": "ducimus suscipit sit dolores incidunt quis similique error ducimus et"
}

#### update audit_log
PUT {{baseUrl}}/api/{{apiVersion}}/audit_logs/103 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "user_id": 1,
    "team_id": 3,
    "action_type": "UPDATE",
    "action_service": "Gateway API",
    "description": "ducimus suscipit sit dolores incidunt quis similique error ducimus et update"
}

#### edit audit_log
PATCH {{baseUrl}}/api/{{apiVersion}}/audit_logs/103 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "team_id": 5,
    "action_type": "CREATE",
    "action_service": "Gateway API",
    "description": "ducimus suscipit sit dolores incidunt quis similique error ducimus et edit"
}

#### get one audit log by id
DELETE {{baseUrl}}/api/{{apiVersion}}/audit_logs/2 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

## TESTS
### Test Email
#### test email
# GET {{baseUrl}}/api/{{apiVersion}}/email-test HTTP/1.1
# Content-Type: application/json

# // add in routes (api.v1.php)
# // use App\Jobs\SendEmailJob;
# // use App\Models\EmailTemplate;
# Route::get('email-test', function () {
#     $to = [
#         'to' => [
#             'email' => 'loki.sinclair@hdruk.ac.uk',
#             'name' => 'Loki Sinclair',
#         ],
#     ];

#     $template = EmailTemplate::where('identifier', '=', 'example_template')->first();

#     $replacements = [
#         '[[header_text]]' => 'Health Data Research UK',
#         '[[button_text]]' => 'Click me!',
#         '[[subheading_text]]' => 'Sub Heading Something or other',
#     ];

#     SendEmailJob::dispatch($to, $template, $replacements);
# });

#### send a test for jwt
POST {{baseUrl}}/api/{{apiVersion}}/test HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

#### send a test and check access
POST {{baseUrl}}/api/{{apiVersion}}/test/check_access HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}


### Cohort Requests
#### get all cohort requests
GET {{baseUrl}}/api/{{apiVersion}}/cohort_requests HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get all cohort requests with query parameters
# GET {{baseUrl}}/api/{{apiVersion}}/cohort_requests?orderBy=created_at:asc,updated_at:asc,organisation:desc,name:desc&status=Approved&name=dan
# GET {{baseUrl}}/api/{{apiVersion}}/cohort_requests?orderBy=created_at:asc,updated_at:asc,organisation:desc,name:desc
GET {{baseUrl}}/api/{{apiVersion}}/cohort_requests?orderBy=name:asc&name=doe HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### get cohort request by id
GET {{baseUrl}}/api/{{apiVersion}}/cohort_requests/23 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

#### create cohort request
POST {{baseUrl}}/api/{{apiVersion}}/cohort_requests HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "details": "ducimus suscipit sit dolores incidunt quis similique error ducimus et"
}

#### update cohort request
PUT {{baseUrl}}/api/{{apiVersion}}/cohort_requests/24 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}

{
    "request_status" : "APPROVED",
    "details": "ducimus suscipit sit dolores incidunt quis similique error ducimus et - put"
}

#### delete cohort request by id
DELETE {{baseUrl}}/api/{{apiVersion}}/cohort_requests/24 HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{accessToken}}